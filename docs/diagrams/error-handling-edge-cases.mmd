---
config:
  theme: base
  themeVariables:
    primaryColor: '#ffebee'
    primaryTextColor: '#b71c1c'
    primaryBorderColor: '#d32f2f'
    lineColor: '#f44336'
    fontFamily: 'Segoe UI, Arial, sans-serif'
    fontSize: 10px
    background: '#fafafa'
  flowchart:
    htmlLabels: true
    curve: basis
    useMaxWidth: true
    diagramPadding: 20
title: Error Handling and Edge Cases - TSPLIB95 ETL System
---
flowchart TD
    subgraph input_errors["ğŸ“ Input-Level Errors"]
        file_system_errors["ğŸš« File System Issues<br/>Common Scenarios<br/>â”Œâ”€ File not found or moved<br/>â”œâ”€ Permission denied (read access)<br/>â”œâ”€ Network drive disconnection<br/>â”œâ”€ Disk full during processing<br/>â”œâ”€ File locked by another process<br/>â””â”€ Corrupted file system metadata<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Retry with exponential backoff<br/>â€¢ Skip and continue with other files<br/>â€¢ Detailed logging for manual intervention<br/>â€¢ Graceful degradation to available files"]
        
        encoding_errors["ğŸ“ Character Encoding Issues<br/>Edge Cases<br/>â”Œâ”€ Non-UTF8 encoded files (legacy)<br/>â”œâ”€ Mixed encoding within single file<br/>â”œâ”€ Byte order mark (BOM) handling<br/>â”œâ”€ NULL bytes in text files<br/>â”œâ”€ Line ending inconsistencies<br/>â””â”€ Special characters in problem names<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Auto-detect encoding (chardet)<br/>â€¢ Fallback encoding sequence<br/>â€¢ Sanitize invalid characters<br/>â€¢ Preserve original with warnings"]
        
        size_limit_errors["ğŸ“ File Size Limitations<br/>Boundary Conditions<br/>â”Œâ”€ Empty files (0 bytes)<br/>â”œâ”€ Extremely large files (>1GB)<br/>â”œâ”€ Files with many small sections<br/>â”œâ”€ Dense edge weight matrices<br/>â”œâ”€ Files with excessive comments<br/>â””â”€ Malformed size declarations<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Configurable size limits<br/>â€¢ Streaming processing for large files<br/>â€¢ Memory-mapped file access<br/>â€¢ Chunked processing with progress"]
    end
    
    subgraph parsing_errors["ğŸ“Š Parsing-Level Errors"]
        format_errors["ğŸ“‹ TSPLIB Format Violations<br/>Specification Deviations<br/>â”Œâ”€ Missing required sections (NAME, TYPE)<br/>â”œâ”€ Invalid section keywords<br/>â”œâ”€ Malformed section headers<br/>â”œâ”€ Inconsistent field separators<br/>â”œâ”€ Missing EOF marker<br/>â”œâ”€ Sections in wrong order<br/>â””â”€ Duplicate section definitions<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Relaxed parsing mode<br/>â€¢ Section auto-detection<br/>â€¢ Default value substitution<br/>â€¢ Partial data extraction<br/>â€¢ Format migration suggestions"]
        
        data_consistency_errors["ğŸ” Data Consistency Issues<br/>Internal Contradictions<br/>â”Œâ”€ DIMENSION != actual node count<br/>â”œâ”€ Node IDs not sequential (1,2,3...)<br/>â”œâ”€ Missing nodes in coordinate section<br/>â”œâ”€ Coordinate dimension mismatch<br/>â”œâ”€ Edge weight matrix size wrong<br/>â”œâ”€ Tour references non-existent nodes<br/>â””â”€ Capacity specified but no demands<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Auto-correct dimension from data<br/>â€¢ Fill missing nodes with interpolation<br/>â€¢ Validate and repair node sequences<br/>â€¢ Dimension consistency enforcement<br/>â€¢ Warning generation for conflicts"]
        
        edge_weight_errors["âš–ï¸ Edge Weight Computation Errors<br/>Distance Calculation Issues<br/>â”Œâ”€ Invalid coordinates (NaN, Inf)<br/>â”œâ”€ Coordinates outside valid ranges<br/>â”œâ”€ Geographic coordinate errors<br/>â”œâ”€ Missing distance function for type<br/>â”œâ”€ Precision overflow/underflow<br/>â”œâ”€ SPECIAL type without custom function<br/>â””â”€ EXPLICIT matrix incomplete<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Coordinate validation and clamping<br/>â€¢ Fallback distance functions<br/>â€¢ Precision safeguards<br/>â€¢ Matrix completion algorithms<br/>â€¢ Custom distance function registration"]
    end
    
    subgraph transformation_errors["ğŸ”„ Transformation-Level Errors"]
        index_conversion_errors["ğŸ”¢ Index Conversion Issues<br/>1-based â†’ 0-based Problems<br/>â”Œâ”€ Zero-based indices in TSPLIB file<br/>â”œâ”€ Negative node indices<br/>â”œâ”€ Non-sequential node numbering<br/>â”œâ”€ Index gaps in node sequences<br/>â”œâ”€ Tour indices outside valid range<br/>â”œâ”€ Edge references to missing nodes<br/>â””â”€ Depot indices inconsistencies<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Smart index detection (0 vs 1 based)<br/>â€¢ Index remapping for gaps<br/>â€¢ Tour validation and repair<br/>â€¢ Edge reference validation<br/>â€¢ Consistent depot index handling"]
        
        vrp_specific_errors["ğŸš› VRP-Specific Transformation Errors<br/>Vehicle Routing Edge Cases<br/>â”Œâ”€ Multiple depot handling ambiguity<br/>â”œâ”€ Zero or negative demands<br/>â”œâ”€ Demand exceeds vehicle capacity<br/>â”œâ”€ No depot specified in VRP<br/>â”œâ”€ Time window format variations<br/>â”œâ”€ Service time inconsistencies<br/>â””â”€ Route feasibility violations<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Default depot assignment<br/>â€¢ Demand normalization<br/>â€¢ Capacity scaling warnings<br/>â€¢ Route feasibility checks<br/>â€¢ Time window standardization<br/>â€¢ Service time default values"]
        
        memory_overflow_errors["ğŸ’¾ Memory Overflow Scenarios<br/>Large Dataset Handling<br/>â”Œâ”€ Dense edge matrices (nÂ² storage)<br/>â”œâ”€ Very large coordinate datasets<br/>â”œâ”€ Multiple concurrent large files<br/>â”œâ”€ Excessive tour data storage<br/>â”œâ”€ Memory fragmentation issues<br/>â””â”€ Out-of-memory during batch processing<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Streaming large file processing<br/>â€¢ Sparse matrix representations<br/>â€¢ Memory pool management<br/>â€¢ Garbage collection optimization<br/>â€¢ Batch size dynamic adjustment<br/>â€¢ Emergency cleanup procedures"]
    end
    
    subgraph database_errors["ğŸ—„ï¸ Database-Level Errors"]
        transaction_errors["ğŸ’¼ Transaction Management Issues<br/>ACID Compliance Failures<br/>â”Œâ”€ Database lock timeout<br/>â”œâ”€ Transaction deadlock detection<br/>â”œâ”€ Connection pool exhaustion<br/>â”œâ”€ Disk space exhaustion<br/>â”œâ”€ Concurrent write conflicts<br/>â”œâ”€ Foreign key constraint violations<br/>â””â”€ Rollback recovery failures<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Retry with exponential backoff<br/>â€¢ Connection pool monitoring<br/>â€¢ Disk space pre-checks<br/>â€¢ Conflict resolution strategies<br/>â€¢ Partial transaction salvage<br/>â€¢ Graceful degradation modes"]
        
        schema_migration_errors["ğŸ”„ Schema Evolution Issues<br/>Database Structure Changes<br/>â”Œâ”€ Missing migration scripts<br/>â”œâ”€ Incompatible schema versions<br/>â”œâ”€ Migration rollback failures<br/>â”œâ”€ Data type conversion errors<br/>â”œâ”€ Index corruption during migration<br/>â”œâ”€ Constraint violation during upgrade<br/>â””â”€ Migration partial completion<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Backup before migration<br/>â€¢ Schema version validation<br/>â€¢ Incremental migration steps<br/>â€¢ Data preservation strategies<br/>â€¢ Rollback procedures<br/>â€¢ Migration status tracking"]
        
        query_performance_errors["âš¡ Query Performance Issues<br/>Scalability Problems<br/>â”Œâ”€ Missing or outdated statistics<br/>â”œâ”€ Query plan regression<br/>â”œâ”€ Index fragmentation<br/>â”œâ”€ Memory pressure on queries<br/>â”œâ”€ Concurrent query interference<br/>â”œâ”€ Large result set memory issues<br/>â””â”€ Join operation optimization failures<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Query plan analysis and hints<br/>â€¢ Index maintenance scheduling<br/>â€¢ Result set pagination<br/>â€¢ Query timeout enforcement<br/>â€¢ Resource monitoring and limits<br/>â€¢ Alternative query strategies"]
    end
    
    subgraph parallel_processing_errors["ğŸ‘¥ Parallel Processing Errors"]
        worker_failures["ğŸ‘· Worker Process Failures<br/>Multi-Process Issues<br/>â”Œâ”€ Worker process crash/segfault<br/>â”œâ”€ Inter-process communication failure<br/>â”œâ”€ Shared resource contention<br/>â”œâ”€ Load balancing inefficiencies<br/>â”œâ”€ Worker hanging/infinite loops<br/>â”œâ”€ Resource cleanup after failure<br/>â””â”€ Progress reporting inconsistencies<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Worker health monitoring<br/>â€¢ Automatic worker restart<br/>â€¢ Task redistribution<br/>â€¢ Resource isolation<br/>â€¢ Timeout enforcement<br/>â€¢ Progress state recovery"]
        
        resource_contention_errors["ğŸ”’ Resource Contention Issues<br/>Concurrent Access Problems<br/>â”Œâ”€ Database connection limits<br/>â”œâ”€ File system lock conflicts<br/>â”œâ”€ Memory allocation competition<br/>â”œâ”€ CPU core over-subscription<br/>â”œâ”€ I/O bandwidth saturation<br/>â”œâ”€ Network resource exhaustion<br/>â””â”€ Temporary file space conflicts<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Resource pooling and queueing<br/>â€¢ Dynamic resource allocation<br/>â€¢ Priority-based scheduling<br/>â€¢ Resource usage monitoring<br/>â€¢ Graceful degradation modes<br/>â€¢ Adaptive concurrency limits"]
        
        synchronization_errors["ğŸ”„ Synchronization Issues<br/>Coordination Failures<br/>â”Œâ”€ Race conditions in file processing<br/>â”œâ”€ Inconsistent progress reporting<br/>â”œâ”€ Result aggregation failures<br/>â”œâ”€ Partial result handling<br/>â”œâ”€ Worker coordination timeouts<br/>â”œâ”€ State consistency violations<br/>â””â”€ Cleanup synchronization failures<br/><br/>ğŸ”§ Recovery Strategy:<br/>â€¢ Atomic operations for critical sections<br/>â€¢ State machine for coordination<br/>â€¢ Timeout-based recovery<br/>â€¢ Partial result preservation<br/>â€¢ Coordination health checks<br/>â€¢ Emergency stop procedures"]
    end
    
    subgraph edge_case_scenarios["ğŸ¯ Specific Edge Case Scenarios"]
        extreme_datasets["ğŸ“Š Extreme Dataset Characteristics<br/>Boundary Value Testing<br/>â”Œâ”€ Single-node problems (dimension=1)<br/>â”œâ”€ Massive problems (dimension>100,000)<br/>â”œâ”€ Zero-capacity VRP problems<br/>â”œâ”€ Problems with all nodes at same location<br/>â”œâ”€ Infinite or NaN coordinate values<br/>â”œâ”€ Problems with negative coordinates<br/>â””â”€ Degenerate tour solutions<br/><br/>ğŸ”§ Handling Strategy:<br/>â€¢ Boundary value validation<br/>â€¢ Special case detection<br/>â€¢ Alternative processing modes<br/>â€¢ Graceful handling warnings<br/>â€¢ Performance scaling tests"]
        
        malicious_inputs["ğŸ›¡ï¸ Malicious/Adversarial Inputs<br/>Security Considerations<br/>â”Œâ”€ Extremely deep file paths<br/>â”œâ”€ Files with zip bombs (compression)<br/>â”œâ”€ Symlink attacks and path traversal<br/>â”œâ”€ Files designed to cause crashes<br/>â”œâ”€ Resource exhaustion attacks<br/>â”œâ”€ Injection through file names<br/>â””â”€ Memory exhaustion patterns<br/><br/>ğŸ”§ Security Measures:<br/>â€¢ Path sanitization and validation<br/>â€¢ Resource limit enforcement<br/>â€¢ Input validation and sanitization<br/>â€¢ Sandboxed processing environment<br/>â€¢ Anomaly detection<br/>â€¢ Rate limiting and throttling"]
        
        legacy_compatibility["ğŸ•°ï¸ Legacy Format Compatibility<br/>Historical TSPLIB Variants<br/>â”Œâ”€ Old TSPLIB format variations<br/>â”œâ”€ Non-standard section extensions<br/>â”œâ”€ Vendor-specific format modifications<br/>â”œâ”€ Academic format experiments<br/>â”œâ”€ Encoding variations across regions<br/>â”œâ”€ Different comment conventions<br/>â””â”€ Missing or implied specifications<br/><br/>ğŸ”§ Compatibility Strategy:<br/>â€¢ Format version detection<br/>â€¢ Progressive parsing fallbacks<br/>â€¢ Migration path suggestions<br/>â€¢ Legacy format documentation<br/>â€¢ Backward compatibility modes<br/>â€¢ Format normalization tools"]
    end
    
    %% Error flow connections
    file_system_errors --> format_errors
    encoding_errors --> format_errors
    size_limit_errors --> memory_overflow_errors
    
    format_errors --> data_consistency_errors
    data_consistency_errors --> edge_weight_errors
    edge_weight_errors --> index_conversion_errors
    
    index_conversion_errors --> vrp_specific_errors
    vrp_specific_errors --> memory_overflow_errors
    memory_overflow_errors --> transaction_errors
    
    transaction_errors --> schema_migration_errors
    schema_migration_errors --> query_performance_errors
    
    worker_failures --> resource_contention_errors
    resource_contention_errors --> synchronization_errors
    
    query_performance_errors --> worker_failures
    synchronization_errors --> extreme_datasets
    extreme_datasets --> malicious_inputs
    malicious_inputs --> legacy_compatibility
    
    classDef inputError fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef parsingError fill:#f8bbd9,stroke:#c2185b,stroke-width:2px
    classDef transformError fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    classDef databaseError fill:#c5cae9,stroke:#3f51b5,stroke-width:2px
    classDef parallelError fill:#b3e5fc,stroke:#0288d1,stroke-width:2px
    classDef edgeCase fill:#b2dfdb,stroke:#00695c,stroke-width:2px
    
    class file_system_errors,encoding_errors,size_limit_errors inputError
    class format_errors,data_consistency_errors,edge_weight_errors parsingError
    class index_conversion_errors,vrp_specific_errors,memory_overflow_errors transformError
    class transaction_errors,schema_migration_errors,query_performance_errors databaseError
    class worker_failures,resource_contention_errors,synchronization_errors parallelError
    class extreme_datasets,malicious_inputs,legacy_compatibility edgeCase